# Dependency Graphs

## Dependency Graph for monorepo

We use `nx` to generate dependency graphs showing the relationships between packages and apps.

### How

1. `yarn exec nx dep-graph`
2. Access the website URL in the `nx` output.
3. Click "Show all projects".

## Dependency Graphs within the same app/package

The graphs are generated by `dependency-cruiser` and `graphviz`

### Prerequisites

```sh
# to install `dependency-cruiser` in the *root* directory
yarn install

# to install the `dot` command
brew install graphviz
```

### Usage

Execute these commands in _root_ directory

#### Relationship between root directories in UI

```sh
yarn exec depcruise --include-only "^apps/ui/src/.+/" --exclude "__mocks__/|\\.(stories|test)\\.(js|ts|tsx)" --collapse 4 --output-type dot apps/ui/src |\
  dot -T png > docs/dependency_graphs/ui_root_directories.png
```

#### Relationship between directories in `hooks` in UI

```sh
yarn exec depcruise --include-only "^apps/ui/src/hooks/.+/" --exclude "__mocks__/|\\.(stories|test)\\.(js|ts|tsx)" --collapse 5 --output-type dot apps/ui/src |\
  dot -T png > docs/dependency_graphs/ui_hook_directories.png
```

#### Relationship between directories in `models` in UI

```sh
yarn exec depcruise --include-only "^apps/ui/src/models/.+/" --exclude "__mocks__/|\\.(stories|test)\\.(js|ts|tsx)" --collapse 5 --output-type dot apps/ui/src |\
  dot -T png > docs/dependency_graphs/ui_model_directories.png
```
